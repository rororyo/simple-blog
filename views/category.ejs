<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Category Page</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- Font Awesome CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/styles/catPage.css">
</head>
<body>
    <!-- Navbar -->
    <%- include('navbar.ejs') %>

    <!-- Category Heading -->
    <h1 class="text-center mt-5">Category</h1>

    <div class="container mt-5" style="min-height: 70vh;">
        <!-- Search Input -->
        <div class="input-group mb-3">
            <input type="search" id="myInput" class="form-control" oninput="search()" placeholder="Search" aria-label="Search" aria-describedby="search-addon">
            <span class="input-group-text" id="search-addon"><i class="fas fa-search"></i></span>
        </div>

        <!-- Category List -->
        <ul class="list-group mt-4" id="searchResults">
            <% postCategories.forEach(category => { %>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <a href="/category/<%= category.category_name %>">
                    <%= category.category_name %>
                </a>
                <span class="badge bg-primary rounded-pill"><%= category.category_amount %> Posts</span>
            </li>
            <% }); %>
        </ul>
    </div>

    <!-- Footer -->
    <%- include('footer.ejs') %>

    <!-- Bootstrap Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <!-- Font Awesome JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
    <script>
        function search() {
            var input, filter, ul, li, a, i;
            input = document.getElementById("myInput");
            filter = input.value.toUpperCase();
            ul = document.getElementById("searchResults");
            li = ul.getElementsByTagName("li");
            for (i = 0; i < li.length; i++) {
                a = li[i].getElementsByTagName("a")[0];
                if (a.innerHTML.toUpperCase().indexOf(filter) > -1) {
                    li[i].style.display = "";
                } else {
                    li[i].style.setProperty('display', 'none', 'important');
                }
            }
        }
    </script>
</body>
</html>
